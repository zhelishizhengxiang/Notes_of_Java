**保护性暂停模式是并发编程中用于 “在一个线程等待另一个线程的执行结果” 的同步设计技巧；**

![](assets/07保护性暂停模式/file-20250910154950267.png)
* join底层是如何运用该原理的下面会讲

###### 普通版GuardObject

设计该GuardedObject类的代码如下图所示  
![](assets/07保护性暂停模式/file-20250910155134772.png)

实际使用如下

![](assets/07保护性暂停模式/file-20250910155658264.png)
![](assets/07保护性暂停模式/file-20250910155716833.png)


###### 带超时版 GuardedObject

![](assets/07保护性暂停模式/file-20250910160602715.png)
* complete方法不变


不超时：  
![](assets/07保护性暂停模式/file-20250910160841848.png)
![](assets/07保护性暂停模式/file-20250910160906917.png)

超时：   
![](assets/07保护性暂停模式/file-20250910161124629.png)


虚假唤醒： 
![](assets/07保护性暂停模式/file-20250910161251964.png)


###### join原理
![](assets/07保护性暂停模式/file-20250910161846289.png)
![](assets/07保护性暂停模式/file-20250910162043205.png)
* 调用的线程一直等待。wait(0)就相当于无参的wwait()。  
	![](assets/07保护性暂停模式/file-20250910162315941.png)

###### 多任务版 GuardObject
![](assets/07保护性暂停模式/file-20250911094406789.png)
![](assets/07保护性暂停模式/file-20250911094416997.png)![](assets/07保护性暂停模式/file-20250911094825228.png)
![](assets/07保护性暂停模式/file-20250911095115589.png)![](assets/07保护性暂停模式/file-20250911095430034.png)
![](assets/07保护性暂停模式/file-20250911095441885.png)