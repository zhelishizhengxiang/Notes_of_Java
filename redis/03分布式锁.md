### 1.自己实现的分布式锁会有的问题
![](assets/03分布式锁/file-20251111164523304.png)
* 解决方案：redis之父写的RedLock算法

### 2.Redisson源码解析——redis客户端分布式锁及redlock算法的实现

其基本原理与手写的分布式锁原理几乎相同，下面只讲一部分要点

![](assets/03分布式锁/file-20251111214012576.png)
![](assets/03分布式锁/file-20251111214308441.png)
![](assets/03分布式锁/file-20251111214319148.png)
![](assets/03分布式锁/file-20251111214325017.png)


###### 加锁流程 
![](assets/03分布式锁/file-20251111214634151.png)
![](assets/03分布式锁/file-20251111215023913.png)


###### 定时续期源码
![](assets/03分布式锁/file-20251111213446306.png)![](assets/03分布式锁/file-20251111213650613.png)
* 使用redisson的分布式锁后，底层会自动加上“看门狗”自动续期机制


![](assets/03分布式锁/file-20251111214634151.png)![](assets/03分布式锁/file-20251111215201971.png)
![](assets/03分布式锁/file-20251111215336137.png)
![](assets/03分布式锁/file-20251111215346155.png)
![](assets/03分布式锁/file-20251111215510145.png)


###### 解锁流程
![](assets/03分布式锁/file-20251111215714047.png)![](assets/03分布式锁/file-20251111215743993.png)
![](assets/03分布式锁/file-20251111215859725.png)

### 3.Redisson多机思想及案例
![](assets/03分布式锁/file-20251111231120291.png)

![](assets/03分布式锁/file-20251111231349399.png)
![](assets/03分布式锁/file-20251111231620707.png)
* 上面创建redlock锁是已经被弃用，其他的api还照旧再用。新的api如下

![](assets/03分布式锁/file-20251111231818083.png)
![](assets/03分布式锁/file-20251111231842517.png)