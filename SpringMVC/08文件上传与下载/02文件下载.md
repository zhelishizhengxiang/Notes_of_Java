
```html
<!--文件下载-->
<a th:href="@{/download}">文件下载</a>
```

文件下载核心程序，使用ResponseEntity：代码十分固定，用的时候直接拿去用就行
```java
@GetMapping("/download")
public ResponseEntity<byte[]> downloadFile(HttpServletResponse response, HttpServletRequest request) throws IOException {
    File file = new File(request.getServletContext().getRealPath("/upload") + "/1.jpeg");
    // 创建响应头对象
    HttpHeaders headers = new HttpHeaders();
    // 设置响应内容类型
    headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);
    // 设置下载文件的名称，attachment时固定搭配
    headers.setContentDispositionFormData("attachment", file.getName());

    // 下载文件
    ResponseEntity<byte[]> entity = new ResponseEntity<byte[]>(Files.readAllBytes(file.toPath()), headers, HttpStatus.OK);
    return entity;
}
```



效果：  
![image.png](https://cdn.nlark.com/yuque/0/2024/png/21376908/1711332732449-ed2ddda1-7b8e-405a-af51-e5e2f8452558.png#averageHue=%23dee2de&clientId=u3242acff-c3dd-4&from=paste&height=99&id=u82ac9055&originHeight=99&originWidth=324&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4563&status=done&style=shadow&taskId=u5a774a56-7a25-461a-9d35-b987df1c3bf&title=&width=324)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/21376908/1711332745775-3de01f16-df6d-41bd-bc4d-905bedf34687.png#averageHue=%239fcbae&clientId=u3242acff-c3dd-4&from=paste&height=430&id=uaf265e4e&originHeight=430&originWidth=1001&originalType=binary&ratio=1&rotation=0&showTitle=false&size=87269&status=done&style=shadow&taskId=ue6deb1ff-a022-425a-a976-f80dc181ef3&title=&width=1001)

